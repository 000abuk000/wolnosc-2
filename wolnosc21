# ğŸ“ Struktura projektu dla GitHub

## Struktura folderÃ³w

```
dziennik-wybaczania/
â”‚
â”œâ”€â”€ index.html              # GÅ‚Ã³wny plik HTML
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css          # Wszystkie style
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ app.js             # GÅ‚Ã³wna logika aplikacji
â”‚   â”œâ”€â”€ data.js            # Dane (emocje, afirmacje, szablony)
â”‚   â””â”€â”€ storage.js         # LocalStorage management
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ icon.png           # Ikona aplikacji (512x512)
â”‚   â””â”€â”€ screenshot.png     # Screenshot dla README
â”œâ”€â”€ README.md              # Dokumentacja
â”œâ”€â”€ LICENSE                # Licencja MIT
â””â”€â”€ .gitignore            # Ignorowane pliki
```

---

## ğŸ“„ index.html

```html
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dziennik Wybaczania - Aplikacja wspierajÄ…ca proces uzdrowienia emocjonalnego">
    <meta name="keywords" content="dziennik, emocje, wybaczanie, mental health, wellbeing">
    <meta name="author" content="Twoje ImiÄ™">
    <title>Dziennik Wybaczania</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="assets/icon.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <div class="header">
                <h1>Jak siÄ™ dzisiaj czujesz?</h1>
                <p id="current-date"></p>
            </div>
            <div class="content">
                <div class="emotion-grid" id="emotion-grid"></div>
                
                <div class="intensity-slider">
                    <label>IntensywnoÅ›Ä‡ (1-5)</label>
                    <div class="slider-container">
                        <input type="range" min="1" max="5" value="3" id="intensity-slider">
                    </div>
                    <div class="intensity-labels">
                        <span>SÅ‚aba</span>
                        <span class="intensity-value" id="intensity-value">3</span>
                        <span>Silna</span>
                    </div>
                </div>

                <button class="btn" onclick="app.saveCheckin()">Zapisz check-in</button>
                <button class="btn btn-secondary" onclick="app.goToTemplates()">Zapisz i dodaj wpis</button>

                <div class="affirmation-box">
                    <div class="affirmation-text" id="affirmation-text"></div>
                    <button class="btn-refresh" onclick="app.refreshAffirmation()">ğŸ”„ OdÅ›wieÅ¼</button>
                </div>
            </div>
        </div>

        <!-- History Screen -->
        <div id="history-screen" class="screen">
            <div class="header">
                <h1>Twoje wpisy</h1>
            </div>
            <div class="content" id="history-content"></div>
        </div>

        <!-- Trends Screen -->
        <div id="trends-screen" class="screen">
            <div class="header">
                <h1>Twoje trendy</h1>
            </div>
            <div class="content">
                <div class="chart-container">
                    <div class="chart-title">NastrÃ³j w czasie</div>
                    <div class="period-selector">
                        <button class="period-btn active" onclick="app.setPeriod(7)">7 dni</button>
                        <button class="period-btn" onclick="app.setPeriod(30)">30 dni</button>
                        <button class="period-btn" onclick="app.setPeriod(90)">90 dni</button>
                    </div>
                    <div id="chart-content"></div>
                </div>
                <div id="insights-content"></div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <div class="header">
                <h1>Ustawienia</h1>
            </div>
            <div class="content">
                <div class="settings-section">
                    <div class="settings-title">Powiadomienia</div>
                    <div class="settings-item">
                        <span class="settings-label">WÅ‚Ä…cz powiadomienia</span>
                        <div class="toggle" onclick="app.toggleSetting(this)"></div>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="settings-title">PrywatnoÅ›Ä‡ i dane</div>
                    <div class="info-box">
                        <div class="info-text">
                            <strong>Co zbieramy:</strong> Tylko Twoje wpisy i emocje, zapisane lokalnie w przeglÄ…darce.<br><br>
                            <strong>Czego NIE robimy:</strong> Nie sprzedajemy danych, nie wyÅ›wietlamy reklam, nie udostÄ™pniamy informacji firmom trzecim.
                        </div>
                    </div>
                    <button class="btn btn-danger" onclick="app.confirmDeleteAll()">ğŸ—‘ï¸ UsuÅ„ wszystkie dane</button>
                </div>

                <div class="settings-section">
                    <div class="settings-title">Informacje</div>
                    <div class="info-box">
                        <div class="info-text">
                            <strong>Wersja:</strong> 1.0.0<br><br>
                            <strong>Disclaimer:</strong> Ta aplikacja nie zastÄ™puje profesjonalnej terapii ani pomocy medycznej. W sytuacjach kryzysowych skontaktuj siÄ™ z psychologiem lub zadzwoÅ„ pod numer 116 123.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Templates Screen -->
        <div id="templates-screen" class="screen">
            <div class="header">
                <h1>Wybierz szablon</h1>
                <p>Dopasowany do Twojej emocji</p>
            </div>
            <div class="content">
                <div id="templates-content"></div>
                <button class="btn btn-secondary" onclick="app.showScreen('home-screen')">Anuluj</button>
            </div>
        </div>

        <!-- Journal Screen -->
        <div id="journal-screen" class="screen">
            <div class="header">
                <h1 id="journal-title"></h1>
            </div>
            <div class="content">
                <div id="journal-prompts"></div>
                <button class="btn" onclick="app.saveEntry()">Zapisz wpis</button>
                <button class="btn btn-secondary" onclick="app.showScreen('templates-screen')">WrÃ³Ä‡</button>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="app.showScreen('home-screen')">
                <span class="nav-icon">ğŸ </span>
                Start
            </button>
            <button class="nav-tab" onclick="app.showScreen('history-screen')">
                <span class="nav-icon">ğŸ“–</span>
                Historia
            </button>
            <button class="nav-tab" onclick="app.showScreen('trends-screen')">
                <span class="nav-icon">ğŸ“Š</span>
                Trendy
            </button>
            <button class="nav-tab" onclick="app.showScreen('settings-screen')">
                <span class="nav-icon">âš™ï¸</span>
                Ustawienia
            </button>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-title">âš ï¸ UsunÄ…Ä‡ wszystkie dane?</div>
            <div class="modal-text">Ta akcja jest nieodwracalna. Wszystkie Twoje wpisy, check-iny i ustawienia zostanÄ… trwale usuniÄ™te.</div>
            <div class="modal-buttons">
                <button class="modal-btn" style="background: #f0f0f0; color: #333;" onclick="app.closeModal()">Anuluj</button>
                <button class="modal-btn" style="background: #ff5252; color: white;" onclick="app.deleteAllData()">UsuÅ„</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <!-- Scripts -->
    <script src="js/data.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
```

---

## ğŸ“„ README.md

```markdown
# ğŸŒ¸ Dziennik Wybaczania

Aplikacja wspierajÄ…ca proces uzdrowienia emocjonalnego z podejÅ›ciem "healing-first". Wybaczenie jest opcjonalne â€“ to Twoja droga, Twoje tempo.

![Screenshot](assets/screenshot.png)

## âœ¨ Funkcje

- âœ… **Check-in emocji** - ÅšledÅº swoje emocje z 8 opcjami + intensywnoÅ›Ä‡ (1-5)
- âœ… **Dzienne afirmacje** - Dopasowane do Twojej emocji
- âœ… **5 szablonÃ³w dziennika** - Gotowe prompty zamiast pustej kartki
- âœ… **Historia wpisÃ³w** - PrzeglÄ…daj swoje check-iny i refleksje
- âœ… **Trendy i wzorce** - Obserwuj zmiany w nastrojach
- âœ… **Privacy-first** - Wszystkie dane zapisane lokalnie w przeglÄ…darce
- âœ… **Bez reklam** - Nie sprzedajemy Twoich danych

## ğŸš€ Demo na Å¼ywo

ğŸ‘‰ [https://twoj-username.github.io/dziennik-wybaczania](https://twoj-username.github.io/dziennik-wybaczania)

## ğŸ› ï¸ Technologie

- **HTML5** - Struktura
- **CSS3** - Stylizacja (bez frameworkÃ³w)
- **Vanilla JavaScript** - Logika aplikacji
- **LocalStorage** - Przechowywanie danych

## ğŸ“¦ Instalacja lokalna

1. Sklonuj repozytorium:
```bash
git clone https://github.com/twoj-username/dziennik-wybaczania.git
cd dziennik-wybaczania
```

2. OtwÃ³rz `index.html` w przeglÄ…darce
```bash
# lub uÅ¼yj prostego serwera HTTP
python -m http.server 8000
# nastÄ™pnie otwÃ³rz http://localhost:8000
```

## ğŸŒ Deploy na GitHub Pages

1. Fork tego repozytorium
2. PrzejdÅº do Settings â†’ Pages
3. Wybierz branch `main` i folder `/ (root)`
4. Zapisz - Twoja aplikacja bÄ™dzie dostÄ™pna pod adresem `https://twoj-username.github.io/dziennik-wybaczania`

## ğŸ“± UÅ¼ycie jako PWA (Progressive Web App)

Aplikacja moÅ¼e dziaÅ‚aÄ‡ jak natywna aplikacja mobilna:

1. OtwÃ³rz w przeglÄ…darce mobilnej (Chrome, Safari)
2. Wybierz "Dodaj do ekranu gÅ‚Ã³wnego"
3. Uruchamiaj jak zwykÅ‚Ä… aplikacjÄ™

## ğŸ”’ PrywatnoÅ›Ä‡

- **Brak serwera** - Wszystko dziaÅ‚a w przeglÄ…darce
- **LocalStorage** - Dane zapisane tylko na Twoim urzÄ…dzeniu
- **Brak analityki** - Nie Å›ledzimy Twoich dziaÅ‚aÅ„
- **Brak reklam** - Nie monetyzujemy Twoich danych
- **Open source** - Kod jest publiczny i audytowalny

## ğŸ“š Szablony dziennika

1. **ğŸ”¥ Uwolnienie zÅ‚oÅ›ci** - Bez oceniania, z bezpieczeÅ„stwem
2. **ğŸŒŠ Ukojenie i bezpieczeÅ„stwo** - Wyciszenie ukÅ‚adu nerwowego
3. **ğŸš§ Granice i decyzje** - Konkretne granice
4. **ğŸ’œ List do siebie** - Samo-wspÃ³Å‚czucie zamiast krytyki
5. **ğŸ•Šï¸ Co mogÄ™ puÅ›ciÄ‡** - Opcjonalne wybaczanie

## ğŸ¤ WspÃ³Å‚praca

Zapraszamy do wspÃ³Å‚pracy! JeÅ›li chcesz pomÃ³c:

1. Fork repozytorium
2. StwÃ³rz branch (`git checkout -b feature/NowaFunkcja`)
3. Commit zmian (`git commit -m 'Dodaj nowÄ… funkcjÄ™'`)
4. Push do brancha (`git push origin feature/NowaFunkcja`)
5. OtwÃ³rz Pull Request

## ğŸ› ZgÅ‚aszanie bÅ‚Ä™dÃ³w

ZnalazÅ‚eÅ› bug? [OtwÃ³rz issue](https://github.com/twoj-username/dziennik-wybaczania/issues)

## ğŸ“„ Licencja

MIT License - Zobacz [LICENSE](LICENSE) dla szczegÃ³Å‚Ã³w

## âš ï¸ Disclaimer

Ta aplikacja nie zastÄ™puje profesjonalnej terapii ani pomocy medycznej. W sytuacjach kryzysowych skontaktuj siÄ™ z:
- **Telefon Zaufania**: 116 123
- **Telefon dla dzieci i mÅ‚odzieÅ¼y**: 116 111
- **Telefon w sprawie przemocy domowej**: 800 120 002

## ğŸ’– Wsparcie projektu

JeÅ›li aplikacja Ci pomogÅ‚a, rozwaÅ¼:
- â­ Danie gwiazdki na GitHub
- ğŸ“¢ Podzielenie siÄ™ z innymi
- ğŸ’¬ Zostawienie opinii

## ğŸ“ Kontakt

- GitHub: [@twoj-username](https://github.com/twoj-username)
- Email: twoj-email@example.com

---

Wykonane z ğŸ’™ dla osÃ³b w procesie uzdrowienia emocjonalnego
```

---

## ğŸ“„ LICENSE (MIT)

```
MIT License

Copyright (c) 2024 [Twoje ImiÄ™]

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## ğŸ“„ .gitignore

```
# OS files
.DS_Store
Thumbs.db

# Editor directories
.vscode/
.idea/
*.swp
*.swo
*~

# Logs
*.log
npm-debug.log*

# Temporary files
*.tmp
temp/

# Build files (jeÅ›li dodasz build process w przyszÅ‚oÅ›ci)
dist/
build/
```

---

## ğŸš€ Instrukcje deploy

### Metoda 1: GitHub Pages (Zalecane)

1. **UtwÃ³rz repozytorium na GitHub:**
   - Nazwa: `dziennik-wybaczania`
   - Publiczne
   - Bez README (juÅ¼ masz)

2. **Upload plikÃ³w:**
```bash
git init
git add .
git commit -m "Initial commit - Dziennik Wybaczania v1.0"
git branch -M main
git remote add origin https://github.com/twoj-username/dziennik-wybaczania.git
git push -u origin main
```

3. **Aktywuj GitHub Pages:**
   - Settings â†’ Pages
   - Source: Deploy from branch
   - Branch: `main` / `/ (root)`
   - Save

4. **Gotowe!** Aplikacja dostÄ™pna pod:
   `https://twoj-username.github.io/dziennik-wybaczania`

### Metoda 2: Netlify (Drag & Drop)

1. Zip caÅ‚y folder projektu
2. WejdÅº na [netlify.com](https://netlify.com)
3. PrzeciÄ…gnij zip na stronÄ™
4. Gotowe - dostaniesz automatyczny URL

### Metoda 3: Vercel

```bash
npm i -g vercel
vercel
```

---

## âœ… Checklist przed publikacjÄ…

- [ ] Zaktualizuj `README.md` z wÅ‚aÅ›ciwym username
- [ ] Dodaj screenshot do `assets/screenshot.png`
- [ ] SprawdÅº wszystkie linki
- [ ] Przetestuj na mobile
- [ ] Przetestuj na rÃ³Å¼nych przeglÄ…darkach
- [ ] Dodaj `manifest.json` dla PWA (opcjonalnie)
- [ ] Dodaj `service-worker.js` dla offline mode (opcjonalnie)

---

## ğŸ‰ Gotowe do uÅ¼ycia!

Masz teraz **kompletnÄ… aplikacjÄ™ webowÄ…** gotowÄ… do umieszczenia na GitHub!

MoÅ¼esz:
1. SkopiowaÄ‡ caÅ‚y kod do swojego projektu
2. UploadowaÄ‡ na GitHub
3. WÅ‚Ä…czyÄ‡ GitHub Pages
4. PodzieliÄ‡ siÄ™ linkiem z innymi

**Link bÄ™dzie dziaÅ‚aÅ‚ jako:** `https://twoj-username.github.io/dziennik-wybaczania`

// ============================================
// js/data.js - Dane aplikacji
// ============================================

const AppData = {
    emotions: [
        { code: 'anger', icon: 'ğŸ˜¤', label: 'ZÅ‚oÅ›Ä‡' },
        { code: 'sadness', icon: 'ğŸ˜¢', label: 'Smutek' },
        { code: 'anxiety', icon: 'ğŸ˜°', label: 'LÄ™k' },
        { code: 'calm', icon: 'ğŸ˜Œ', label: 'SpokÃ³j' },
        { code: 'guilt', icon: 'ğŸ˜”', label: 'Wina' },
        { code: 'shame', icon: 'ğŸ˜³', label: 'Wstyd' },
        { code: 'loneliness', icon: 'ğŸ˜', label: 'SamotnoÅ›Ä‡' },
        { code: 'other', icon: 'ğŸ¤”', label: 'Inna' }
    ],

    affirmations: {
        anger: [
            "Moja zÅ‚oÅ›Ä‡ ma sens â€” pokazuje, co jest dla mnie waÅ¼ne.",
            "MogÄ™ czuÄ‡ zÅ‚oÅ›Ä‡ i nadal wybieraÄ‡ bezpieczne dziaÅ‚anie.",
            "Oddycham. ZÅ‚oÅ›Ä‡ jest falÄ… â€” nie musi mnÄ… kierowaÄ‡.",
            "Mam prawo powiedzieÄ‡ â€nie" bez tÅ‚umaczenia siÄ™ godzinami.",
            "MogÄ™ rozÅ‚adowaÄ‡ napiÄ™cie bez ranienia siebie ani innych."
        ],
        sadness: [
            "Smutek jest czÄ™Å›ciÄ… uzdrowienia. Nie muszÄ™ go omijaÄ‡.",
            "MogÄ™ byÄ‡ dziÅ› delikatny/a dla siebie â€” to nie sÅ‚aboÅ›Ä‡.",
            "Mam prawo zwolniÄ‡, gdy jest mi ciÄ™Å¼ko.",
            "Nie jestem problemem. Mam trudny moment.",
            "MogÄ™ szukaÄ‡ ciepÅ‚a i wsparcia bez poczucia winy."
        ],
        anxiety: [
            "Oddycham wolniej. MÃ³j ukÅ‚ad nerwowy moÅ¼e siÄ™ uspokoiÄ‡.",
            "To tylko myÅ›l â€” nie fakt, nie przepowiednia.",
            "MogÄ™ wrÃ³ciÄ‡ do tego, co tu i teraz: ciaÅ‚o, oddech, otoczenie.",
            "Nie muszÄ™ mieÄ‡ 100% pewnoÅ›ci, Å¼eby zrobiÄ‡ maÅ‚y krok.",
            "DziÅ› wybieram bezpieczeÅ„stwo, nie perfekcjÄ™."
        ],
        calm: [
            "MogÄ™ zwolniÄ‡. Nie wszystko jest pilne.",
            "SpokÃ³j to praktyka. RobiÄ™ jÄ… po trochu.",
            "Jeden spokojny oddech ma znaczenie.",
            "MogÄ™ byÄ‡ tu, gdzie jestem â€” bez ocen.",
            "Moje tempo jest w porzÄ…dku."
        ],
        guilt: [
            "MogÄ™ wziÄ…Ä‡ odpowiedzialnoÅ›Ä‡ bez biczowania siÄ™.",
            "BÅ‚Ä…d nie przekreÅ›la mojej wartoÅ›ci.",
            "MogÄ™ naprawiÄ‡, co siÄ™ da â€” i odpuÅ›ciÄ‡ resztÄ™.",
            "UczÄ™ siÄ™. Nauka bywa nieidealna.",
            "Nie muszÄ™ zasÅ‚ugiwaÄ‡ na odpoczynek. MogÄ™ odpoczÄ…Ä‡ teraz."
        ],
        shame: [
            "Wstyd mÃ³wi gÅ‚oÅ›no, ale nie mÃ³wi prawdy o mnie.",
            "MogÄ™ byÄ‡ niedoskonaÅ‚y/a i nadal godny/a szacunku.",
            "Nie muszÄ™ siÄ™ ukrywaÄ‡, Å¼eby byÄ‡ bezpieczny/a.",
            "To, co siÄ™ wydarzyÅ‚o, nie definiuje caÅ‚ego mojego Å¼ycia.",
            "MogÄ™ mÃ³wiÄ‡ do siebie ciszej i Å‚agodniej."
        ],
        loneliness: [
            "SamotnoÅ›Ä‡ jest sygnaÅ‚em. Nie oznacza, Å¼e coÅ› jest ze mnÄ… nie tak.",
            "MogÄ™ szukaÄ‡ kontaktu w maÅ‚ych krokach.",
            "Jedna wiadomoÅ›Ä‡ do zaufanej osoby to teÅ¼ odwaga.",
            "Nie muszÄ™ byÄ‡ â€w formie", Å¼eby zasÅ‚ugiwaÄ‡ na obecnoÅ›Ä‡.",
            "MogÄ™ byÄ‡ dla siebie dobrym towarzyszem, choÄ‡by na chwilÄ™."
        ],
        other: [
            "MogÄ™ mÃ³wiÄ‡ do siebie jak do kogoÅ›, kogo kocham.",
            "Nie muszÄ™ zasÅ‚uÅ¼yÄ‡ na Å¼yczliwoÅ›Ä‡. MogÄ™ jÄ… sobie daÄ‡.",
            "Jestem czÅ‚owiekiem. To oznacza, Å¼e czasem mi trudno.",
            "Wybieram wsparcie zamiast samobiczowania.",
            "MogÄ™ odpoczÄ…Ä‡, nawet jeÅ›li nie zrobiÅ‚em/am wszystkiego."
        ]
    },

    templates: [
        {
            id: 'anger',
            icon: 'ğŸ”¥',
            title: 'Uwolnienie zÅ‚oÅ›ci',
            desc: 'Bez oceniania. ZÅ‚oÅ›Ä‡ ma prawo tu byÄ‡. RozÅ‚aduj jÄ… bez szkody.',
            prompts: [
                'Co dokÅ‚adnie wywoÅ‚aÅ‚o mojÄ… zÅ‚oÅ›Ä‡? Opisz fakty bez ocen.',
                'Gdzie czujÄ™ zÅ‚oÅ›Ä‡ w ciele? JakÄ… ma intensywnoÅ›Ä‡ (1â€“5)?',
                'Czego moja zÅ‚oÅ›Ä‡ broni? Jakiej potrzeby lub wartoÅ›ci dotyczy?',
                'Co chciaÅ‚(a)bym powiedzieÄ‡ (bez cenzury), gdybym mÃ³gÅ‚(a) byÄ‡ w peÅ‚ni szczery(a)?',
                'Jeden bezpieczny krok na dziÅ›: co pomoÅ¼e mi rozÅ‚adowaÄ‡ napiÄ™cie bez krzywdy?'
            ]
        },
        {
            id: 'soothe',
            icon: 'ğŸŒŠ',
            title: 'Ukojenie i bezpieczeÅ„stwo',
            desc: 'Wyciszenie ukÅ‚adu nerwowego i powrÃ³t do poczucia kontroli.',
            prompts: [
                'Co teraz czujÄ™? Nazwij emocjÄ™ i daj jej zgodÄ™ na istnienie.',
                'Co jest w tej chwili bezpieczne lub staÅ‚e w moim otoczeniu? (3 rzeczy)',
                'Jaka myÅ›l najbardziej mnie nakrÄ™ca? Jak mogÄ™ jÄ… zÅ‚agodziÄ‡ jednym zdaniem bardziej realistycznym?',
                'Czego potrzebujÄ™ w ciÄ…gu najbliÅ¼szych 2 godzin (sen, jedzenie, kontakt, cisza, ruch)?',
                'Jak mogÄ™ sobie dodaÄ‡ otuchy dziÅ› wieczorem? (1 maÅ‚y gest dla siebie)'
            ]
        },
        {
            id: 'boundaries',
            icon: 'ğŸš§',
            title: 'Granice i decyzje',
            desc: 'Co jest OK, a co nie. Konkretne granice i nastÄ™pny krok.',
            prompts: [
                'Co jest dla mnie nie do przyjÄ™cia w tej sytuacji? (konkret)',
                'Jaka granica ochroni mnie teraz najlepiej? (co robiÄ™ / czego nie robiÄ™)',
                'Jak mogÄ™ zakomunikowaÄ‡ tÄ™ granicÄ™ prosto i spokojnie? Napisz wersjÄ™ 1â€“2 zdania.',
                'Czego siÄ™ bojÄ™, gdy stawiam granice? Co jest bardziej prawdopodobne niÅ¼ najgorszy scenariusz?',
                'Jeden nastÄ™pny krok (w 24h): co konkretnie zrobiÄ™ lub odpuszczÄ™?'
            ]
        },
        {
            id: 'compassion',
            icon: 'ğŸ’œ',
            title: 'List do siebie (samo-wspÃ³Å‚czucie)',
            desc: 'Mniej surowoÅ›ci, wiÄ™cej Å¼yczliwoÅ›ci. Jak do przyjaciela.',
            prompts: [
                'Co mnie teraz boli? Opisz to tak, jakbyÅ› mÃ³wiÅ‚(a) do bliskiej osoby.',
                'Jakie sÅ‚owa wsparcia powiedziaÅ‚(a)bym przyjacielowi w tej samej sytuacji?',
                'Za co mogÄ™ sobie okazaÄ‡ uznanie dzisiaj, nawet jeÅ›li to drobiazg?',
                'Jaka czÄ™Å›Ä‡ mnie czuje wstyd/winÄ™? Czego ona potrzebuje zamiast krytyki?',
                'Napisz 3 zdania do siebie: Å¼yczliwe, prawdziwe, bez lukru.'
            ]
        },
        {
            id: 'letgo',
            icon: 'ğŸ•Šï¸',
            title: 'Co mogÄ™ puÅ›ciÄ‡ (wybaczenie opcjonalne)',
            desc: 'Uzdrowienie najpierw. Wybaczenie to moÅ¼liwoÅ›Ä‡, nie obowiÄ…zek.',
            prompts: [
                'Co siÄ™ wydarzyÅ‚o i co to dla mnie znaczy? (krÃ³tko, bez usprawiedliwieÅ„)',
                'JakÄ… cenÄ™ pÅ‚acÄ™, trzymajÄ…c siÄ™ tej historii? (energia, czas, spokÃ³j)',
                'Co mogÄ™ puÅ›ciÄ‡ dziÅ› o 1%? (np. potrzebÄ™ odpowiedzi, zemsty, kontroli)',
                'Jakie granice chroniÄ… mnie przed powtÃ³rkÄ…? (konkretne zasady dla mnie)',
                'JeÅ›li wybaczenie byÅ‚oby kiedyÅ› moÅ¼liwe â€” jak wyglÄ…daÅ‚oby â€bezpieczne" tempo? (opcjonalnie)'
            ]
        }
    ]
};

// ============================================
// js/storage.js - LocalStorage management
// ============================================

const Storage = {
    STORAGE_KEY: 'dziennik_wybaczania_data',

    save(data) {
        try {
            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));
            return true;
        } catch (e) {
            console.error('Error saving to localStorage:', e);
            return false;
        }
    },

    load() {
        try {
            const data = localStorage.getItem(this.STORAGE_KEY);
            return data ? JSON.parse(data) : null;
        } catch (e) {
            console.error('Error loading from localStorage:', e);
            return null;
        }
    },

    clear() {
        try {
            localStorage.removeItem(this.STORAGE_KEY);
            return true;
        } catch (e) {
            console.error('Error clearing localStorage:', e);
            return false;
        }
    }
};

// ============================================
// js/app.js - GÅ‚Ã³wna logika aplikacji
// ============================================

const app = {
    state: {
        selectedEmotion: null,
        intensity: 3,
        currentTemplate: null,
        checkins: [],
        entries: [],
        period: 7
    },

    init() {
        this.loadFromStorage();
        this.renderEmotions();
        this.updateDate();
        this.setupSlider();
        this.renderHistory();
        this.renderTrends();
        this.updateAffirmation('other');
    },

    // ========== Emotions ==========
    renderEmotions() {
        const grid = document.getElementById('emotion-grid');
        grid.innerHTML = AppData.emotions.map(emotion => `
            <div class="emotion-card" data-emotion="${emotion.code}" onclick="app.selectEmotion('${emotion.code}', '${emotion.icon}')">
                <div class="emotion-icon">${emotion.icon}</div>
                <div class="emotion-label">${emotion.label}</div>
            </div>
        `).join('');
    },

    selectEmotion(code, icon) {
        document.querySelectorAll('.emotion-card').forEach(card => {
            card.classList.remove('selected');
        });
        const card = document.querySelector(`[data-emotion="${code}"]`);
        if (card) card.classList.add('selected');
        
        this.state.selectedEmotion = { code, icon };
        this.updateAffirmation(code);
    },

    // ========== Affirmations ==========
    updateAffirmation(emotionCode) {
        const affirmations = AppData.affirmations[emotionCode] || AppData.affirmations.other;
        const random = affirmations[Math.floor(Math.random() * affirmations.length)];
        document.getElementById('affirmation-text').textContent = random;
    },

    refreshAffirmation() {
        const emotion = this.state.selectedEmotion?.code || 'other';
        this.updateAffirmation(emotion);
    },

    // ========== Slider ==========
    setupSlider() {
        const slider = document.getElementById('intensity-slider');
        const value = document.getElementById('intensity-value');
        
        slider.addEventListener('input', (e) => {
            value.textContent = e.target.value;
            this.state.intensity = parseInt(e.target.value);
        });
    },

    // ========== Date ==========
    updateDate() {
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const date = new Date().toLocaleDateString('pl-PL', options);
        const dateEl = document.getElementById('current-date');
        if (dateEl) dateEl.textContent = date;
    },

    // ========== Check-in ==========
    saveCheckin() {
        if (!this.state.selectedEmotion) {
            this.showToast('Wybierz najpierw emocjÄ™');
            return;
        }

        const checkin = {
            id: Date.now(),
            emotion: this.state.selectedEmotion,
            intensity: this.state.intensity,
            timestamp: new Date().toISOString(),
            date: new Date().toLocaleDateString('pl-PL')
        };

        this.state.checkins.push(checkin);
        this.saveToStorage();
        this.showToast('âœ“ Check-in zapisany!');
        
        this.resetCheckinForm();
        this.renderHistory();
        this.renderTrends();
    },

    resetCheckinForm() {
        document.querySelectorAll('.emotion-card').forEach(card => {
            card.classList.remove('selected');
        });
        this.state.selectedEmotion = null;
        document.getElementById('intensity-slider').value = 3;
        document.getElementById('intensity-value').textContent = '3';
        this.state.intensity = 3;
    },

    goToTemplates() {
        if (!this.state.selectedEmotion) {
            this.showToast('Wybierz najpierw emocjÄ™');
            return;
        }
        
        this.saveCheckin();
        this.renderTemplates();
        this.showScreen('templates-screen');
    },

    // ========== Templates ==========
    renderTemplates() {
        const content = document.getElementById('templates-content');
        const emotion = this.state.selectedEmotion?.code;
        
        const emotionToTemplate = {
            anger: ['anger', 'boundaries'],
            sadness: ['soothe', 'compassion', 'letgo'],
            anxiety: ['soothe', 'boundaries'],
            guilt: ['compassion', 'boundaries'],
            shame: ['compassion', 'soothe'],
            loneliness: ['compassion', 'soothe']
        };

        const recommendedTemplates = emotionToTemplate[emotion] || [];
        
        content.innerHTML = AppData.templates.map(template => {
            const isRecommended = recommendedTemplates.includes(template.id);
            
            return `
                <div class="template-card ${isRecommended ? 'recommended' : ''}" onclick="app.openTemplate('${template.id}')">
                    ${isRecommended ? '<span class="badge">Polecane</span>' : ''}
                    <div class="template-header">
                        <span class="template-icon">${template.icon}</span>
                        <div class="template-title">${template.title}</div>
                    </div>
                    <div class="template-desc">${template.desc}</div>
                </div>
            `;
        }).join('');
    },

    openTemplate(templateId) {
        const template = AppData.templates.find(t => t.id === templateId);
        if (!template) return;

        this.state.currentTemplate = template;
        document.getElementById('journal-title').textContent = template.title;
        
        const promptsContainer = document.getElementById('journal-prompts');
        promptsContainer.innerHTML = template.prompts.map((prompt, index) => `
            <div class="prompt-field">
                <label class="prompt-label">${prompt}</label>
                <textarea class="prompt-textarea" data-index="${index}" placeholder="Twoja odpowiedÅº (opcjonalnie)..."></textarea>
            </div>
        `).join('');
        
        this.showScreen('journal-screen');
    },

    // ========== Journal Entry ==========
    saveEntry() {
        const textareas = document.querySelectorAll('.prompt-textarea');
        const answers = Array.from(textareas).map(ta => ta.value);
        
        if (answers.every(a => !a.trim())) {
            this.showToast('WypeÅ‚nij przynajmniej jedno pole');
            return;
        }

        const entry = {
            id: Date.now(),
            template: this.state.currentTemplate,
            emotion: this.state.selectedEmotion,
            answers: answers,
            timestamp: new Date().toISOString(),
            date: new Date().toLocaleDateString('pl-PL')
        };

        this.state.entries.push(entry);
        this.saveToStorage();
        this.showToast('âœ“ Wpis zapisany!');
        this.renderHistory();
        
        textareas.forEach(ta => ta.value = '');
        this.showScreen('home-screen');
    },

    // ========== History ==========
    renderHistory() {
        const content = document.getElementById('history-content');
        const allItems = [
            ...this.state.checkins.map(c => ({ ...c, type: 'checkin' })),
            ...this.state.entries.map(e => ({ ...e, type: 'entry' }))
        ].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

        if (allItems.length === 0) {
            content.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">ğŸ“–</div>
                    <div class="empty-text">
                        Nie masz jeszcze wpisÃ³w.<br>
                        ZrÃ³b check-in lub dodaj pierwszy wpis.
                    </div>
                </div>
            `;
            return;
        }

        content.innerHTML = allItems.map(item => {
            const intensityDots = 'â—'.repeat(item.intensity) + 'â—‹'.repeat(5 - item.intensity);
            const preview = item.type === 'entry' && item.answers && item.answers[0] 
                ? `<div class="card-preview">${item.answers[0].substring(0, 100)}${item.answers[0].length > 100 ? '...' : ''}</div>`
                : '';
            
            return `
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">${item.emotion.icon}</div>
                        <div class="card-info">
                            <div class="card-date">${item.date}</div>
                            <div class="card-title">${item.template ? item.template.title : 'Check-in'}</div>
                        </div>
                    </div>
                    <div class="card-preview">IntensywnoÅ›Ä‡: ${intensityDots}</div>
                    ${preview}
                </div>
            `;
        }).join('');
    },

    // ========== Trends ==========
    renderTrends() {
        const chartContent = document.getElementById('chart-content');
        const insightsContent = document.getElementById('insights-content');
        
        if (this.state.checkins.length < 3) {
            chartContent.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">ğŸ“Š</div>
                    <div class="empty-text">ZrÃ³b min. 3 check-iny aby zobaczyÄ‡ trendy</div>
                </div>
            `;
            insightsContent.innerHTML = '';
            return;
        }

        const emotionCounts = {};
        this.state.checkins.forEach(checkin => {
            const code = checkin.emotion.code;
            emotionCounts[code] = (emotionCounts[code] || 0) + 1;
        });

        const mostFrequent = Object.entries(emotionCounts)
            .sort(([,a], [,b]) => b - a)[0];
        
        const emotionLabel = AppData.emotions.find(e => e.code === mostFrequent[0])?.label || mostFrequent[0];

        chartContent.innerHTML = `
            <div class="empty-state">
                <div class="empty-icon">ğŸ“ˆ</div>
                <div class="empty-text">${this.state.checkins.length} check-inÃ³w w ostatnich ${this.state.period} dniach</div>
            </div>
        `;

        insightsContent.innerHTML = `
            <div class="insight-box">
                <div class="insight-title">ğŸ’¡ Twoje wzorce</div>
                <div class="insight-text">
                    NajczÄ™stsza emocja: <strong>${emotionLabel} (${mostFrequent[1]}x)</strong><br><br>
                    Porada: ZauwaÅ¼, co siÄ™ dzieje gdy czujesz ${emotionLabel.toLowerCase()} â€” moÅ¼e to byÄ‡ sygnaÅ‚ do wprowadzenia granic lub samo-wspÃ³Å‚czucia.
                </div>
            </div>
        `;
    },

    setPeriod(days) {
        this.state.period = days;
        document.querySelectorAll('.period-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.classList.add('active');
        this.renderTrends();
    },

    // ========== Navigation ==========
    showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        const targetScreen = document.getElementById(screenId);
        if (targetScreen) targetScreen.classList.add('active');

        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.classList.remove('active');
        });
        const activeTab = document.querySelector(`[onclick*="${screenId}"]`);
        if (activeTab) activeTab.classList.add('active');

        if (screenId === 'history-screen') {
            this.renderHistory();
        } else if (screenId === 'trends-screen') {
            this.renderTrends();
        }
    },

    // ========== Settings ==========
    toggleSetting(element) {
        element.classList.toggle('active');
    },

    confirmDeleteAll() {
        document.getElementById('modal').classList.add('active');
    },

    closeModal() {
        document.getElementById('modal').classList.remove('active');
    },

    deleteAllData() {
        this.state.checkins = [];
        this.state.entries = [];
        Storage.clear();
        this.closeModal();
        this.showToast('âœ“ Wszystkie dane zostaÅ‚y usuniÄ™te');
        this.renderHistory();
        this.renderTrends();
    },

    // ========== UI Helpers ==========
    showToast(message) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    },

    // ========== Storage ==========
    saveToStorage() {
        Storage.save({
            checkins: this.state.checkins,
            entries: this.state.entries
        });
    },

    loadFromStorage() {
        const data = Storage.load();
        if (data) {
            this.state.checkins = data.checkins || [];
            this.state.entries = data.entries || [];
        }
    }
};

// Initialize app when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    app.init();
});
